<!DOCTYPE html>
<html lang="pt-PT">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dragon Remodelação - Pintura e Remodelações em Lisboa</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        html {
            scroll-behavior: smooth;
        }
        body {
            font-family: 'Inter', sans-serif;
        }
        .hero-bg {
            background-image: linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('https://images.unsplash.com/photo-1618220179428-22790b461013?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1920&q=80');
            background-size: cover;
            background-position: center;
        }
        .section-title {
            position: relative;
            padding-bottom: 0.5rem;
            margin-bottom: 2rem;
        }
        .section-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 4px;
            background-color: #1e3a8a; /* blue-900 */
        }
        .ph-icon {
            font-size: 3.5rem;
            line-height: 1;
        }
        /* Estilo para o spinner de carregamento */
        .loader {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #1e3a8a;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <!-- Header -->
    <header class="bg-white shadow-md sticky top-0 z-50">
        <div class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="#" class="text-2xl font-bold text-blue-900 flex items-center">
                <i class="ph-fire-simple-bold text-3xl mr-2"></i>Dragon Remodelação
            </a>
            <nav class="hidden lg:flex items-center space-x-6">
                <a href="#services" class="text-gray-600 hover:text-blue-900 transition duration-300">Serviços</a>
                <a href="#portfolio" class="text-gray-600 hover:text-blue-900 transition duration-300">Portfólio</a>
                <a href="#ai-visual-inspirer" class="text-gray-600 hover:text-blue-900 transition duration-300">✨ Inspiração Visual</a>
                <a href="#ai-planner" class="text-gray-600 hover:text-blue-900 transition duration-300">Planeador IA</a>
                <a href="#about" class="text-gray-600 hover:text-blue-900 transition duration-300">Sobre Nós</a>
                <a href="#contact" class="bg-blue-800 text-white px-5 py-2 rounded-md hover:bg-blue-900 transition duration-300 font-semibold">Pedir Orçamento</a>
            </nav>
            <button class="lg:hidden" id="mobile-menu-button">
                <i class="ph-list text-3xl text-gray-600"></i>
            </button>
        </div>
        <!-- Mobile Menu -->
        <div class="lg:hidden hidden" id="mobile-menu">
            <a href="#services" class="block px-6 py-3 text-gray-600 hover:bg-gray-100">Serviços</a>
            <a href="#portfolio" class="block px-6 py-3 text-gray-600 hover:bg-gray-100">Portfólio</a>
            <a href="#ai-visual-inspirer" class="block px-6 py-3 text-gray-600 hover:bg-gray-100">✨ Inspiração Visual</a>
            <a href="#ai-planner" class="block px-6 py-3 text-gray-600 hover:bg-gray-100">Planeador IA</a>
            <a href="#about" class="block px-6 py-3 text-gray-600 hover:bg-gray-100">Sobre Nós</a>
            <a href="#contact" class="block px-6 py-3 text-white bg-blue-800 hover:bg-blue-900">Pedir Orçamento</a>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero-bg text-white">
        <div class="container mx-auto px-6 py-32 md:py-48 text-center">
            <h1 class="text-4xl sm:text-5xl md:text-6xl font-bold leading-tight mb-4">Somos a Dragon Remodelação.</h1>
            <p class="text-lg sm:text-xl md:text-2xl mb-8 max-w-3xl mx-auto">Transformamos os seus espaços por dentro. Damos uma nova vida à sua casa ou negócio em Lisboa.</p>
            <a href="#contact" class="bg-blue-700 text-white font-bold py-3 px-8 rounded-lg text-lg hover:bg-blue-800 transition duration-300 ease-in-out transform hover:scale-105">Fale connosco!</a>
        </div>
    </section>

    <!-- Services Section -->
    <section id="services" class="py-20">
        <div class="container mx-auto px-6">
            <h2 class="text-3xl md:text-4xl font-bold text-center text-gray-900 section-title">Os Nossos Serviços</h2>
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8 md:gap-12 mt-16">
                <div class="bg-white p-8 rounded-lg shadow-lg text-center hover:shadow-2xl hover:-translate-y-2 transition-all duration-300"><div class="text-blue-800 mb-4 inline-block"><i class="ph-icon ph-paint-roller"></i></div><h3 class="text-2xl font-bold mb-3">Pintura Profissional</h3><p class="text-gray-600">Serviços de pintura interior e exterior com acabamentos de alta qualidade.</p></div>
                <div class="bg-white p-8 rounded-lg shadow-lg text-center hover:shadow-2xl hover:-translate-y-2 transition-all duration-300"><div class="text-blue-800 mb-4 inline-block"><i class="ph-icon ph-house-line"></i></div><h3 class="text-2xl font-bold mb-3">Remodelação de Interiores</h3><p class="text-gray-600">Renovação completa de cozinhas, casas de banho e outras áreas.</p></div>
                <div class="bg-white p-8 rounded-lg shadow-lg text-center hover:shadow-2xl hover:-translate-y-2 transition-all duration-300"><div class="text-blue-800 mb-4 inline-block"><i class="ph-icon ph-ruler"></i></div><h3 class="text-2xl font-bold mb-3">Pladur e Tetos Falsos</h3><p class="text-gray-600">Instalação de divisórias e tetos em gesso cartonado para criar novos ambientes.</p></div>
                <div class="bg-white p-8 rounded-lg shadow-lg text-center hover:shadow-2xl hover:-translate-y-2 transition-all duration-300"><div class="text-blue-800 mb-4 inline-block"><i class="ph-icon ph-hammer"></i></div><h3 class="text-2xl font-bold mb-3">Renovação de Pavimentos</h3><p class="text-gray-600">Aplicação de soalho flutuante, mosaicos e outros revestimentos.</p></div>
                <div class="bg-white p-8 rounded-lg shadow-lg text-center hover:shadow-2xl hover:-translate-y-2 transition-all duration-300"><div class="text-blue-800 mb-4 inline-block"><i class="ph-icon ph-lightbulb"></i></div><h3 class="text-2xl font-bold mb-3">Eletricidade e Canalização</h3><p class="text-gray-600">Renovação de instalações elétricas e de canalização, garantindo segurança.</p></div>
                <div class="bg-white p-8 rounded-lg shadow-lg text-center hover:shadow-2xl hover:-translate-y-2 transition-all duration-300"><div class="text-blue-800 mb-4 inline-block"><i class="ph-icon ph-shield-check"></i></div><h3 class="text-2xl font-bold mb-3">Impermeabilizações</h3><p class="text-gray-600">Soluções eficazes para terraços, varandas e paredes, prevenindo infiltrações.</p></div>
            </div>
        </div>
    </section>

    <!-- Portfolio Section -->
    <section id="portfolio" class="py-20 bg-gray-100">
        <div class="container mx-auto px-6">
            <h2 class="text-3xl md:text-4xl font-bold text-center text-gray-900 section-title">Projetos Recentes</h2>
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8 mt-16">
                <div class="rounded-lg overflow-hidden shadow-lg group"><img src="https://images.unsplash.com/photo-1505691938895-1758d7feb511?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80" alt="[Imagem de um quarto de apartamento remodelado]" class="w-full h-64 object-cover transition-transform duration-500 group-hover:scale-105" onerror="this.onerror=null;this.src='https://placehold.co/600x400/cccccc/ffffff?text=Imagem+Indisponível';"><div class="p-6 bg-white"><h3 class="text-xl font-bold mb-2">Remodelação de Apartamento</h3><p class="text-gray-600">Laranjeiras, Lisboa</p></div></div>
                <div class="rounded-lg overflow-hidden shadow-lg group"><img src="https://images.unsplash.com/photo-1600585152220-90363fe7e115?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80" alt="[Imagem da pintura exterior de uma casa moderna]" class="w-full h-64 object-cover transition-transform duration-500 group-hover:scale-105" onerror="this.onerror=null;this.src='https://placehold.co/600x400/cccccc/ffffff?text=Imagem+Indisponível';"><div class="p-6 bg-white"><h3 class="text-xl font-bold mb-2">Pintura de Fachada</h3><p class="text-gray-600">Cascais</p></div></div>
                <div class="rounded-lg overflow-hidden shadow-lg group"><img src="https://images.unsplash.com/photo-1604709177595-ee9c2580e9a2?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80" alt="[Imagem de uma cozinha nova e moderna]" class="w-full h-64 object-cover transition-transform duration-500 group-hover:scale-105" onerror="this.onerror=null;this.src='https://placehold.co/600x400/cccccc/ffffff?text=Imagem+Indisponível';"><div class="p-6 bg-white"><h3 class="text-xl font-bold mb-2">Renovação de Cozinha</h3><p class="text-gray-600">Campo de Ourique, Lisboa</p></div></div>
            </div>
        </div>
    </section>

    <!-- AI Visual Inspirer Section -->
    <section id="ai-visual-inspirer" class="py-20">
        <div class="container mx-auto px-6">
            <h2 class="text-3xl md:text-4xl font-bold text-center text-gray-900 section-title">✨ Inspiração Visual com IA</h2>
            <p class="text-center text-gray-600 mt-4 max-w-3xl mx-auto">Envie uma foto do seu espaço! A nossa IA irá analisar a imagem e dar-lhe sugestões de remodelação personalizadas.</p>
            <div class="max-w-3xl mx-auto mt-12 bg-white p-8 rounded-lg shadow-lg">
                <div class="mb-6">
                    <label for="image-upload" class="block text-gray-700 font-semibold mb-2">1. Carregue uma fotografia do seu espaço</label>
                    <input type="file" id="image-upload" accept="image/*" class="w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 cursor-pointer">
                </div>
                <div id="image-preview-container" class="mb-6 hidden text-center">
                     <img id="image-preview" src="#" alt="Pré-visualização da imagem" class="max-h-64 inline-block rounded-lg shadow-md"/>
                </div>
                <div class="mb-6">
                     <label for="visual-ai-prompt" class="block text-gray-700 font-semibold mb-2">2. Descreva o que pretende (opcional)</label>
                     <textarea id="visual-ai-prompt" rows="3" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-shadow" placeholder="Ex: Gostaria de um ambiente mais claro e com um toque de madeira."></textarea>
                </div>
                <div class="text-center">
                    <button id="generate-visual-ideas-btn" class="bg-gradient-to-r from-purple-600 to-blue-600 text-white font-bold py-3 px-8 rounded-lg text-lg hover:from-purple-700 hover:to-blue-700 transition duration-300 transform hover:scale-105 flex items-center justify-center mx-auto">
                        <i class="ph-camera-rotate text-2xl mr-2"></i>
                        Analisar Imagem e Gerar Ideias
                    </button>
                </div>
                <div id="visual-ai-result" class="mt-8 p-6 bg-gray-50 rounded-lg border border-gray-200 min-h-[100px] whitespace-pre-wrap">
                    <p class="text-gray-500">As suas ideias visuais aparecerão aqui...</p>
                </div>
                 <p class="text-center text-xs text-gray-500 mt-4">Atenção: As sugestões da IA são para inspiração. Um orçamento final requer uma visita técnica.</p>
            </div>
        </div>
    </section>

    <!-- AI Planner Section -->
    <section id="ai-planner" class="py-20 bg-gray-100">
        <div class="container mx-auto px-6">
            <h2 class="text-3xl md:text-4xl font-bold text-center text-gray-900 section-title">Planeador de Projetos por Texto</h2>
            <p class="text-center text-gray-600 mt-4 max-w-3xl mx-auto">Não sabe por onde começar? Descreva o seu espaço ou a sua ideia no campo abaixo e deixe que a nossa inteligência artificial crie um ponto de partida para o seu projeto de sonho.</p>
            <div class="max-w-3xl mx-auto mt-12 bg-white p-8 rounded-lg shadow-lg">
                <div class="mb-6">
                    <label for="ai-prompt" class="block text-gray-700 font-semibold mb-2">Descreva o seu espaço:</label>
                    <textarea id="ai-prompt" name="ai-prompt" rows="4" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-shadow" placeholder="Ex: Tenho uma sala de estar pequena com pouca luz natural e gostaria de a tornar mais ampla e acolhedora."></textarea>
                </div>
                <div class="text-center">
                    <button id="generate-ideas-btn" class="bg-gradient-to-r from-blue-700 to-blue-900 text-white font-bold py-3 px-8 rounded-lg text-lg hover:from-blue-800 hover:to-blue-900 transition duration-300 transform hover:scale-105 flex items-center justify-center mx-auto">
                        <i class="ph-sparkle text-2xl mr-2"></i>
                        Gerar Ideias de Remodelação
                    </button>
                </div>
                <div id="ai-result" class="mt-8 p-6 bg-gray-50 rounded-lg border border-gray-200 min-h-[100px] whitespace-pre-wrap">
                    <p class="text-gray-500">As suas ideias personalizadas aparecerão aqui...</p>
                </div>
                 <p class="text-center text-xs text-gray-500 mt-4">Atenção: As sugestões da IA são para inspiração. Um orçamento final requer uma visita técnica.</p>
            </div>
        </div>
    </section>

    <!-- About Us Section -->
    <section id="about" class="py-20">
        <div class="container mx-auto px-6">
            <div class="flex flex-col md:flex-row items-center gap-12 lg:gap-20">
                <div class="md:w-1/2"><img src="https://images.unsplash.com/photo-1581092916346-69dce2a44a2a?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80" alt="[Imagem de um profissional de remodelação a trabalhar]" class="rounded-lg shadow-xl w-full h-auto object-cover" onerror="this.onerror=null;this.src='https://placehold.co/600x400/cccccc/ffffff?text=Imagem+Indisponível';"></div>
                <div class="md:w-1/2"><h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-6">A nossa força é a sua confiança.</h2><p class="text-gray-700 leading-relaxed mb-4">A Dragon Remodelação nasceu da paixão por transformar espaços. Com sede em Lisboa, a nossa equipa é composta por profissionais experientes e dedicados, que se comprometem a entregar um trabalho de excelência.</p><p class="text-gray-700 leading-relaxed">Utilizamos os melhores materiais e as técnicas mais modernas para garantir a sua total satisfação. Para nós, cada projeto é único e merece a máxima atenção ao detalhe.</p></div>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="py-20 bg-gray-100">
        <div class="container mx-auto px-6">
            <h2 class="text-3xl md:text-4xl font-bold text-center text-gray-900 section-title">Peça o seu Orçamento Gratuito</h2>
            <p class="text-center text-gray-600 mt-4 max-w-2xl mx-auto">Tem uma ideia? Fale connosco! Preencha o formulário abaixo e entraremos em contacto o mais breve possível para agendar uma visita e apresentar uma proposta sem compromisso.</p>
            <div class="max-w-3xl mx-auto mt-12 bg-white p-8 rounded-lg shadow-lg">
                <form id="contact-form">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                        <div><label for="name" class="block text-gray-700 font-semibold mb-2">Nome</label><input type="text" id="name" name="name" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-shadow" required></div>
                        <div><label for="email" class="block text-gray-700 font-semibold mb-2">Email</label><input type="email" id="email" name="email" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-shadow" required></div>
                    </div>
                    <div class="mb-6"><label for="phone" class="block text-gray-700 font-semibold mb-2">Telemóvel</label><input type="tel" id="phone" name="phone" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-shadow" required></div>
                    <div class="mb-6"><label for="message" class="block text-gray-700 font-semibold mb-2">Mensagem</label><textarea id="message" name="message" rows="5" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-shadow" placeholder="Descreva brevemente o que pretende..." required></textarea></div>
                    <div class="text-center"><button type="submit" class="bg-blue-800 text-white font-bold py-3 px-12 rounded-lg text-lg hover:bg-blue-900 transition duration-300 transform hover:scale-105">Enviar Pedido</button></div>
                </form>
                <div id="form-feedback" class="text-center mt-6 h-6"></div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white py-12">
        <div class="container mx-auto px-6 text-center">
            <h3 class="text-2xl font-bold mb-2 flex items-center justify-center"><i class="ph-fire-simple-bold text-3xl mr-2"></i>Dragon Remodelação</h3>
            <p class="mb-6 text-gray-400">A sua escolha de confiança para remodelações em Lisboa.</p>
            <div class="flex justify-center space-x-6 mb-8">
                <a href="#" class="text-gray-400 hover:text-white transition duration-300"><i class="ph-facebook-logo text-3xl"></i></a>
                <a href="#" class="text-gray-400 hover:text-white transition duration-300"><i class="ph-instagram-logo text-3xl"></i></a>
                <a href="#" class="text-gray-400 hover:text-white transition duration-300"><i class="ph-linkedin-logo text-3xl"></i></a>
            </div>
            <p class="text-gray-500">&copy; <span id="year"></span> Dragon Remodelação. Todos os direitos reservados.</p>
        </div>
    </footer>

    <script>
        // Mobile menu toggle
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');
        mobileMenuButton.addEventListener('click', () => { mobileMenu.classList.toggle('hidden'); });
        document.querySelectorAll('#mobile-menu a').forEach(link => { link.addEventListener('click', () => { mobileMenu.classList.add('hidden'); }); });

        // Set current year in footer
        document.getElementById('year').textContent = new Date().getFullYear();

        // Contact form submission simulation
        const contactForm = document.getElementById('contact-form');
        const formFeedback = document.getElementById('form-feedback');
        contactForm.addEventListener('submit', function(e) {
            e.preventDefault();
            formFeedback.textContent = 'A enviar a sua mensagem...';
            formFeedback.className = 'text-center mt-6 h-6 text-blue-600';
            setTimeout(() => {
                formFeedback.textContent = 'Obrigado pelo seu contacto! Responderemos em breve.';
                formFeedback.className = 'text-center mt-6 h-6 text-green-600 font-semibold';
                contactForm.reset();
                setTimeout(() => { formFeedback.textContent = ''; }, 5000);
            }, 2000);
        });

        // --- Gemini Text Planner ---
        const generateBtn = document.getElementById('generate-ideas-btn');
        const aiPromptInput = document.getElementById('ai-prompt');
        const aiResultDiv = document.getElementById('ai-result');
        generateBtn.addEventListener('click', async () => {
            const userPrompt = aiPromptInput.value;
            if (!userPrompt.trim()) {
                aiResultDiv.innerHTML = '<p class="text-red-500">Por favor, descreva o seu espaço para receber sugestões.</p>';
                return;
            }
            aiResultDiv.innerHTML = '<div class="loader"></div>';
            generateBtn.disabled = true;
            generateBtn.classList.add('opacity-50', 'cursor-not-allowed');
            const fullPrompt = `Aja como um designer de interiores experiente em Portugal. Um potencial cliente descreveu o seu espaço. Com base na descrição, forneça ideias de remodelação criativas e práticas. A descrição é: "${userPrompt}". Por favor, dê sugestões para: 1. Paleta de Cores (sugira nomes de cores de marcas conhecidas em Portugal, se possível). 2. Tipos de Materiais (para pavimento, mobiliário, etc.). 3. Soluções de Iluminação. 4. Um conceito geral de design (ex: minimalista, industrial, rústico moderno). Formate a sua resposta de forma clara, usando títulos para cada secção.`;
            try {
                const chatHistory = [{ role: "user", parts: [{ text: fullPrompt }] }];
                const payload = { contents: chatHistory };
                const apiKey = "";
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;
                const response = await fetch(apiUrl, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) });
                if (!response.ok) { throw new Error(`HTTP error! status: ${response.status}`); }
                const result = await response.json();
                if (result.candidates && result.candidates[0].content && result.candidates[0].content.parts[0].text) {
                    aiResultDiv.textContent = result.candidates[0].content.parts[0].text;
                } else { throw new Error('Resposta da API inválida ou vazia.'); }
            } catch (error) {
                console.error("Erro ao chamar a API Gemini:", error);
                aiResultDiv.innerHTML = '<p class="text-red-500">Ocorreu um erro ao gerar as ideias. Tente novamente mais tarde.</p>';
            } finally {
                generateBtn.disabled = false;
                generateBtn.classList.remove('opacity-50', 'cursor-not-allowed');
            }
        });

        // --- Gemini Visual Inspirer ---
        const imageUpload = document.getElementById('image-upload');
        const imagePreviewContainer = document.getElementById('image-preview-container');
        const imagePreview = document.getElementById('image-preview');
        const visualGenerateBtn = document.getElementById('generate-visual-ideas-btn');
        const visualAiPromptInput = document.getElementById('visual-ai-prompt');
        const visualAiResultDiv = document.getElementById('visual-ai-result');
        let base64ImageData = null;

        imageUpload.addEventListener('change', () => {
            const file = imageUpload.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    imagePreview.src = e.target.result;
                    imagePreviewContainer.classList.remove('hidden');
                    base64ImageData = e.target.result.split(',')[1];
                };
                reader.readAsDataURL(file);
            }
        });

        visualGenerateBtn.addEventListener('click', async () => {
            if (!base64ImageData) {
                visualAiResultDiv.innerHTML = '<p class="text-red-500">Por favor, carregue uma imagem primeiro.</p>';
                return;
            }
            visualAiResultDiv.innerHTML = '<div class="loader"></div>';
            visualGenerateBtn.disabled = true;
            visualGenerateBtn.classList.add('opacity-50', 'cursor-not-allowed');
            const userTextPrompt = visualAiPromptInput.value || "Forneça sugestões de remodelação para este espaço.";
            const fullPrompt = `Aja como um designer de interiores de topo em Portugal. Analise a imagem deste espaço. Com base na imagem e no pedido do utilizador ("${userTextPrompt}"), forneça ideias de remodelação criativas e práticas. Dê sugestões para: 1. Paleta de Cores. 2. Tipos de Materiais e Mobiliário. 3. Soluções de Iluminação. 4. Um conceito geral de design. Seja específico e inspirador.`;
            try {
                const payload = {
                    contents: [{
                        role: "user",
                        parts: [
                            { text: fullPrompt },
                            { inlineData: { mimeType: imageUpload.files[0].type, data: base64ImageData } }
                        ]
                    }],
                };
                const apiKey = "";
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;
                const response = await fetch(apiUrl, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) });
                if (!response.ok) { throw new Error(`HTTP error! status: ${response.status}`); }
                const result = await response.json();
                if (result.candidates && result.candidates[0].content.parts[0].text) {
                    visualAiResultDiv.textContent = result.candidates[0].content.parts[0].text;
                } else { throw new Error('Resposta da API inválida ou vazia.'); }
            } catch (error) {
                console.error("Erro ao chamar a API Gemini (visual):", error);
                visualAiResultDiv.innerHTML = '<p class="text-red-500">Ocorreu um erro ao analisar a imagem. Tente uma imagem diferente ou tente novamente mais tarde.</p>';
            } finally {
                visualGenerateBtn.disabled = false;
                visualGenerateBtn.classList.remove('opacity-50', 'cursor-not-allowed');
            }
        });
    </script>
</body>
</html>
